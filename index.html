<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="https://img.icons8.com/fluency-systems-regular/96/000000/online-coding.png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <title>Units Tool</title>
    <style>
        body {
            background: #4d4d4d;
        }
        h1 {
            text-align: center;
            font-size: 200%;
            margin-bottom: 20px;
        }
        label, h1 {
            color: #f0f0f0;
        }
        .center {
            padding: 10px;
        }
        #d {
            background: #333333;
            margin: auto;
            border: #dadada solid 1px;
            border-radius: 15px;
            padding: 15px;
        }
        table {
            margin-top: 20px;
        }
        th {
            border : solid black 1px;
            border-radius : 3px;
            padding : 3px;
            background : #dadada;
            font-family: Arial, Helvetica, sans-serif;
        }
        td {
            border : solid black 1px;
            border-radius : 3px;
            padding : 3px;
            background : #f0f0f0;
            font-family: Arial, Helvetica, sans-serif;
        }
        footer {
            margin-top: 20px;
            text-align: center;
        }
        #author {
            margin-top: 20px;
            color: rgb(230, 230, 230);
        }

    </style>
</head>
<body>
    <div class="center">
        <h1>Units Tool</h1>

        <div id="d" class="col-sm-6">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" style="width: 115px">Hexadecimal:</span>
                </div>
                <input type="text" id="hex" class="form-control">
                <div class="input-group-append">
                    <button class="btn btn-primary" type="button" onclick="converterHex()">Converter</button>
                </div>
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" style="width: 115px">Decimal:</span>
                </div>
                <input type="text" id="dec" class="form-control">
                <div class="input-group-append">
                    <button class="btn btn-primary" type="button" onclick="converterDec()">Converter</button>
                </div>
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" style="width: 115px">ASCII:</span>
                </div>
                <input type="text" id="asc" class="form-control">
                <div class="input-group-append">
                    <button class="btn btn-primary" type="button" onclick="converterAsc()">Converter</button>
                </div>
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" style="width: 115px">Binário:</span>
                </div>
                <input type="text" id="bin" class="form-control">
                <div class="input-group-append">
                    <button class="btn btn-primary" type="button" onclick="converterBin()">Converter</button>
                </div>
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" style="width: 115px">Byte:</span>
                </div>
                <input type="text" id="bte" class="form-control">
                <div class="input-group-append">
                    <button class="btn btn-primary" type="button" onclick="converterBte()">Converter</button>
                </div>
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" style="width: 115px">MD5:</span>
                </div>
                <input type="Text" id="md5" class="form-control">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" style="width: 115px">SHA1:</span>
                </div>
                <input type="Text" id="sha1" class="form-control">
            </div>
            <div class="form-group">
                <button class="btn btn-primary" type="button" onclick="cleaning()">Limpar</button>
            </div>
        </div>
    </div>

    <footer>
        <a href="https://github.com/evandroad/unit-tool">
            <img src="https://img.icons8.com/glyph-neue/48/000000/github.png"/>
        </a>
        <a href="https://www.linkedin.com/in/evandro-abreu-domingues/">
            <img src="https://img.icons8.com/color/48/000000/linkedin-circled--v1.png"/>
        </a>
        <div id="author"><span>crated by Evandro Abreu Domingues</span></div>
    </footer>

    <script>
        const HEX = 'hex'
        const DEC = 'dec'
        const ASC = 'asc'
        const BIN = 'bin'
        const BTE = 'bte'
        const MD5 = 'md5'
        const SHA1 = 'sha1'

        //--------------//
        // Input Masks. //
        //--------------//

        window.onload = () => {
            getInput(HEX).onkeyup = () => {
                setValue(getValue(HEX).replace(/[^0-9a-f]+/gi, ""), HEX)
            }

            getInput(DEC).onkeyup = () => {
                setValue(getValue(DEC).replace(/[^0-9]+/gi, ""), DEC)
            }
        
            getInput(BIN).onkeyup = () => {
                setValue(getValue(BIN).replace(/[^0-1]+/gi, ""), BIN)
            }

        }

        //----------------//
        // Click Action. //
        //----------------//

        getInput(HEX).addEventListener('keypress', e => {
            if(e.which == 13) { converterHex() }
        })
        
        getInput(DEC).addEventListener('keypress', e => {
            if(e.which == 13) { converterDec() }
        })
        
        getInput(ASC).addEventListener('keypress', e => {
            if(e.which == 13) { converterAsc() }
        })
        
        getInput(BIN).addEventListener('keypress', e => {
            if(e.which == 13) { converterBin() }
        })

        getInput(BTE).addEventListener('keypress', e => {
            if(e.which == 13) { converterBte() }
        })

        //----------------//
        // Button Action. //
        //----------------//

        function converterHex() {
            if(getValue(HEX) == '') {
                alert('Digite um valor em Hexadecimal.')
            } else {
                setValue(hex2Dec(getValue(HEX)), DEC)
                setValue(hex2Asc(getValue(HEX)), ASC)
                setValue(hex2bin(getValue(HEX)), BIN)
                setValue(hex2Bte(getValue(HEX)), BTE)
                setValue(CryptoJS.MD5(getValue(HEX)), MD5)
                setValue(CryptoJS.SHA1(getValue(HEX)), SHA1)
            }
        }
        
        function converterDec() {
            if(getValue(DEC) == '') {
                alert('Digite um valor em Decimal.')
            } else {
                setValue(dec2Hex(getValue(DEC)), HEX)
                setValue(dec2Asc(getValue(DEC)), ASC)
                setValue(dec2Bin(getValue(DEC)), BIN)
                setValue(dec2Bte(getValue(DEC)), BTE)
                setValue(CryptoJS.MD5(getValue(DEC)), MD5)
                setValue(CryptoJS.SHA1(getValue(DEC)), SHA1)
            }
        }
        
        function converterAsc() {
            if(getValue(ASC) == '') {
                alert('Digite um valor em ASCII.')
            } else {
                setValue(asc2Hex(getValue(ASC)), HEX)
                setValue(asc2Dec(getValue(ASC)), DEC)
                setValue(asc2Bin(getValue(ASC)), BIN)
                setValue(asc2Bte(getValue(ASC)), BTE)
                setValue(CryptoJS.MD5(getValue(ASC)), MD5)
                setValue(CryptoJS.SHA1(getValue(ASC)), SHA1)
            }
        }
        
        function converterBin() {
            if(getValue(BIN) == '') {
                alert('Digite um valor em Binário.')
            } else {
                setValue(bin2Hex(getValue(BIN)), HEX)
                setValue(bin2Dec(getValue(BIN)), DEC)
                setValue(bin2Asc(getValue(BIN)), ASC)
                setValue(bin2Bte(getValue(BIN)), BTE)
                setValue(CryptoJS.MD5(getValue(BIN)), MD5)
                setValue(CryptoJS.SHA1(getValue(BIN)), SHA1)
            }
        }

        function converterBte() {
            if(getValue(BTE) == '') {
                alert('Digite um valor em Byte.')
            } else {
                setValue(bte2Hex(getValue(BTE)), HEX)
                setValue(bte2Dec(getValue(BTE)), DEC)
                setValue(bte2Asc(getValue(BTE)), ASC)
                setValue(bte2Bin(getValue(BTE)), BIN)
                setValue(CryptoJS.MD5(getValue(BTE)), MD5)
                setValue(CryptoJS.SHA1(getValue(BTE)), SHA1)
            }
        }

        //-------------//
        // Handle DOM. //
        //-------------//

        function getInput(id) { return document.getElementById(id)}

        function getValue(id) { return document.getElementById(id).value }

        function setValue(response, id) { document.getElementById(id).value = response }

        //-------------------------------------------//
        // HEXADECIMAL conversions to other formats. //
        //-------------------------------------------//

        function hex2Dec(num) {
            return parseInt(num, 16)
        }

        function hex2Asc(num) {
            var str = '';
            for (var n = 0; n < num.length; n += 2) {
                str += String.fromCharCode(hex2Dec(num.substr(n, 2)));
            }
            return str;
        }

        function hex2bin(num) {
            return parseInt(num, 16).toString(2)
        }

        function hex2Bte(num) {
            var str = '';
            for (var n = 0; n < num.length; n += 2) {
                str += hex2Dec(num.substr(n, 2)) + ", "
            }
            return str.slice(0, str.length - 2);
        }

        //---------------------------------------//
        // DECIMAL conversions to other formats. //
        //---------------------------------------//

        function dec2Hex(num) {
            return Number(num).toString(16).toUpperCase()
        }

        function dec2Asc(num) {
            return hex2Asc(dec2Hex(num))
        }

        function dec2Bin(num) {
            return Number(num).toString(2)
        }

        function dec2Bte(num) {
            return hex2Bte(dec2Hex(num))
        }

        //-------------------------------------//
        // ASCII conversions to other formats. //
        //-------------------------------------//

        function asc2Hex(str) {
            var arr1 = [];
            for (var n = 0; n < str.length; n++) {
                arr1.push(dec2Hex(str.charCodeAt(n)))
            }
            return arr1.join('');
        }

        function asc2Dec(str) {
            return hex2Dec(asc2Hex(str))
        }

        function asc2Bin(str) {
            return hex2bin(asc2Hex(str))
        }

        function asc2Bte(str) {
            var bytes = [];
            for(var i = 0; i < str.length; i++) {
                var char = str.charCodeAt(i);
                bytes.push(char & 0xFF);
            }
            return bytes;
        }

        //--------------------------------------//
        // BINARY conversions to other formats. //
        //--------------------------------------//

        function bin2Hex(num) {
            return parseInt(num, 2).toString(16).toUpperCase()
        }

        function bin2Dec(num) {
            return parseInt(num, 2)
        }

        function bin2Asc(num) {
            return hex2Asc(bin2Hex(num))
        }

        function bin2Bte(num) {
            var str = '';
            for (var n = 0; n < num.length; n += 4) {
                str += parseInt(num, 2)
            }
            return str
        }

        //--------------------------------------//
        // BYTE conversions to other formats. //
        //--------------------------------------//

        function bte2Hex(num) {
            num = num.replace(/\s/g, '').split(',')
            var arr = ''
            num.forEach(element => {
                if (element == 0) {
                    arr += "00"
                } else {
                    if (dec2Hex(element & 0xFF).length == 2) {
                        arr += dec2Hex(element & 0xFF)
                    } else {
                        arr += '0' + dec2Hex(element & 0xFF)
                    }
                }
            });
            return arr
        }
        
        function bte2Dec(num) {
            num = num.replace(/\s/g, '').split(',')
            var arr = []
            num.forEach(element => {
                arr.push(element & 0xFF)
            });
            return arr
        }

        function bte2Asc(num) {
            num = num.replace(/\s/g, '').split(',')
            var arr = ''
            num.forEach(element => {
                arr += dec2Asc(element & 0xFF)
            });
            return arr
        }

        function bte2Bin(num) {
            num = num.replace(/\s/g, '').split(',')
            var arr = ''
            num.forEach(element => {
                arr += dec2Bin(element & 0xFF)
            });
            return arr
        }

        //-----------------------//
        // Clearing form fields. //
        //-----------------------//

        function cleaning() {
            setValue('', HEX)
            setValue('', DEC)
            setValue('', ASC)
            setValue('', BIN)
            setValue('', BTE)
            setValue('', MD5)
            setValue('', SHA1)
        }
    </script>
</body>
</html>